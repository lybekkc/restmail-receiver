version: '3.8'

services:
  restmail-receiver:
    build: ..
    container_name: restmail-receiver
    environment:
      # Network Configuration
      RESTMAIL_POLICY_PORT: 12345
      RESTMAIL_DELIVERY_PORT: 2525
      RESTMAIL_LISTEN_ADDRESS: 0.0.0.0

      # Storage Configuration
      RESTMAIL_STORAGE_BASE_PATH: /var/mail/restmail
      RESTMAIL_STORAGE_INCOMING: incoming
    ports:
      - "2525:2525"    # Mail delivery port
      - "12345:12345"  # Policy service port
    volumes:
      - ./mail-storage:/var/mail/restmail
    restart: unless-stopped

# To use this file:
# 1. docker-compose up -d
# 2. docker-compose logs -f
# 3. docker-compose down

